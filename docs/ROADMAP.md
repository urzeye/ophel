# Ophel Extension Roadmap

> å¾…åŠäº‹é¡¹å’ŒåŠŸèƒ½è§„åˆ’

---

## ğŸ› Bug ä¿®å¤

- [x] **æç¤ºè¯åˆ†ç±»é€‰æ‹©é—®é¢˜** âœ…

  - é—®é¢˜ï¼šæ›´æ”¹æç¤ºè¯åˆ†ç±»ååï¼Œæ²¡æœ‰é»˜è®¤é€‰ä¸­çš„åˆ†ç±»ï¼Œæ‰€æœ‰æç¤ºè¯éƒ½æŸ¥ä¸å‡ºæ¥ï¼Œå¿…é¡»æ‰‹åŠ¨é€‰ä¸€ä¸‹åˆ†ç±»
  - ä¿®å¤ï¼šåœ¨ `handleRenameCategory` ä¸­åŒæ­¥æ›´æ–° `selectedCategory` çŠ¶æ€
  - æ–‡ä»¶ï¼š`src/components/PromptsTab.tsx`

- [ ] **é˜…è¯»å†å²æ¢å¤ä¸å‡†ç¡®**

  - é—®é¢˜ï¼šé˜…è¯»å†å²æ¢å¤åŠŸèƒ½ä¸å‡†ç¡®
  - ä¼˜å…ˆçº§ï¼šä¸­

- [ ] **Gemini Enterprise æ»šåŠ¨é”å®šæ— æ•ˆ**

  - é—®é¢˜ï¼šåœ¨ Gemini Enterprise (business.gemini.google) ç«™ç‚¹ä¸Šæ»šåŠ¨é”å®šåŠŸèƒ½æ— æ•ˆ
  - ä¼˜å…ˆçº§ï¼šä¸­

- [x] **ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»ä¸åŒæ­¥** âœ…
  - é—®é¢˜ï¼šåˆ‡æ¢æ·±æµ…ä¸»é¢˜æ—¶ï¼Œåœ†å½¢æ‰©æ•£åŠ¨ç”»è¿˜æ²¡å®Œæˆå‰ï¼Œé¢æ¿æ¡†æ¶ï¼ˆheader/footerï¼‰å·²å˜æˆç›®æ ‡ä¸»é¢˜é¢œè‰²ï¼Œä½†ä¸­é—´çš„æç¤ºè¯åˆ—è¡¨ã€ä¼šè¯æ–‡ä»¶å¤¹åˆ—è¡¨ã€è¾“å…¥æ¡†ç­‰ä»ä¿æŒåŸä¸»é¢˜æ ·å¼ï¼Œè§†è§‰ä¸ä¸€è‡´
  - ä¿®å¤ï¼šå°† `onModeChange` å›è°ƒå»¶è¿Ÿåˆ° `transition.finished` ä¹‹åï¼Œç¡®ä¿ React é‡æ¸²æŸ“ä¸å¹²æ‰° View Transition åŠ¨ç”»
  - æ–‡ä»¶ï¼š`src/core/theme-manager.ts`

---

## ğŸ”§ é‡æ„

- [ ] **è®¾ç½®é¡µé¢é‡æ„**

  - ç›®æ ‡ï¼šä¼˜åŒ–è®¾ç½®é¡µé¢çš„ä»£ç ç»“æ„å’Œç”¨æˆ·ä½“éªŒ
  - ä¼˜å…ˆçº§ï¼šä¸­

- [ ] **ä¼šè¯ Tab åˆå§‹åŒæ­¥é€»è¾‘**
  - é—®é¢˜ï¼šä¼šè¯åˆ—è¡¨çš„åˆå§‹åŒæ­¥é€»è¾‘éœ€è¦ä¼˜åŒ–
  - ä¼˜å…ˆçº§ï¼šä¸­

---

## ğŸ’¡ æç¤ºè¯åŠŸèƒ½è§„åˆ’

> è¯¦è§ [PROMPTS_ROADMAP.md](./PROMPTS_ROADMAP.md)

### âœ… å·²å®Œæˆ

- [x] **å˜é‡å ä½ç¬¦** - æ”¯æŒ `{{topic}}` æ ¼å¼ï¼Œæ’å…¥æ—¶å¼¹çª—å¡«å†™å˜é‡å€¼
- [x] **æ”¶è—/ç½®é¡¶** - æ‰‹åŠ¨ç½®é¡¶å¸¸ç”¨æç¤ºè¯
- [x] **å¯¼å…¥/å¯¼å‡º JSON** - æ•°æ®è¿ç§»ä¸å¤‡ä»½ï¼ˆæ”¯æŒè¦†ç›–/åˆå¹¶ï¼‰
- [x] **æœ€è¿‘ä½¿ç”¨è®°å½•** - è‡ªåŠ¨è®°å½•å¹¶æ”¯æŒç­›é€‰
- [x] **åˆ†ç±»é¢œè‰²** - æ ¹æ®åˆ†ç±»åè‡ªåŠ¨å“ˆå¸Œç”Ÿæˆé¢œè‰²
- [x] **Markdown é¢„è§ˆ** - é›†æˆ markdown-it + highlight.js

### P1 - å¾…å®ç°

- [ ] **å¿«æ·é”®è®¾ç½®**
  - æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ä»»æ„å¿«æ·é”®
  - å…¼å®¹ Macï¼ˆâŒ˜ï¼‰å’Œ Windowsï¼ˆCtrlï¼‰
  - æä¾›ä¸“é—¨çš„å¿«æ·é”®è®¾ç½®é¢æ¿

- [ ] **ç”¨æˆ·æé—® Markdown æ¸²æŸ“**
  - åœºæ™¯ï¼šGemini æŠŠç”¨æˆ·è¾“å…¥çš„ Markdown æŒ‰è¡Œæ‹†åˆ†æˆ HTMLï¼Œä¸¢å¤±äº†æ ¼å¼
  - æ–¹æ¡ˆï¼šæå– `.query-text-line` æ–‡æœ¬ â†’ åˆå¹¶ â†’ ç”¨ markdown-it æ¸²æŸ“
  - ä½ç½®ï¼šå†…å®¹è®¾ç½® / å¯¹è¯åŒºåŸŸå¢å¼º

```typescript
function extractMarkdownFromGeminiQuery(container: Element): string {
  // 1. è·å–æ‰€æœ‰è¡Œ
  const lines = container.querySelectorAll('.query-text-line')
  
  // 2. æå–æ–‡æœ¬å¹¶è§£ç  HTML å®ä½“
  const textLines = Array.from(lines).map(line => {
    // æ£€æŸ¥æ˜¯å¦æ˜¯ç©ºè¡Œï¼ˆåªæœ‰ <br>ï¼‰
    if (line.querySelector('br') && line.textContent?.trim() === '') {
      return ''
    }
    return line.textContent?.trim() || ''
  })
  
  // 3. åˆå¹¶æˆ Markdown å­—ç¬¦ä¸²
  return textLines.join('\n')
}

// 4. ç„¶åç”¨ç°æœ‰çš„ renderMarkdown æ¸²æŸ“
const markdown = extractMarkdownFromGeminiQuery(queryElement)
const html = renderMarkdown(markdown)
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ       | å†…å®¹              |
| ---------- | ----------------- |
| 2026-01-06 | æ›´æ–°æç¤ºè¯åŠŸèƒ½å®ŒæˆçŠ¶æ€ï¼Œæ·»åŠ å¿«æ·é”®è®¾ç½®è§„åˆ’ |
| 2026-01-06 | æ·»åŠ æç¤ºè¯åŠŸèƒ½è§„åˆ’ |
| 2026-01-06 | åˆ›å»º Roadmap æ–‡æ¡£ |
